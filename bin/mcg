#!/usr/bin/env node

const program = require('commander');
const main = require('../index');
const packageJson = require('../package.json');

const mainAction = async ({ args }) => {
	const modelName = args[0];
	const { testFolder } = program;
	const filesCreated = await main(modelName, process.cwd(), testFolder);
	console.log('Created files:');
	filesCreated.forEach((fc) => {
		console.log(fc);
	});
};

program
	.version(packageJson.version)
	.option(
		'-t,--testFolder <testFolder>',
		'custom folder for the test files to be put in'
	)
	.action(mainAction);

// Run the command
program.parse(process.argv);
